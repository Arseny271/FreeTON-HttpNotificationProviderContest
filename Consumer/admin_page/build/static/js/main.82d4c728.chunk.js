(this["webpackJsonpyour-app-name"]=this["webpackJsonpyour-app-name"]||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var c=n(7),r=n(1),s=n.n(r),i=n(19),a=n.n(i),o=n(3),l=n(16),d=n(20),u=n(2),j=n(21),h=n(31),b=n(35),p=n(36),m=n(11),f=n.n(m),O=n(17);function v(e){return e}function g(e){return e}var x={"admin.auth.login":{path:"admin/auth/login",type:"POST",convertQuery:v,convertResult:g},"admin.auth.logout":{path:"admin/auth/logout",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"admin.auth.check":{path:"admin/auth/check",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"admin.auth.change":{path:"admin/auth/change",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"receiver.config.providers.add":{path:"admin/config/providers/add",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"receiver.config.providers.remove":{path:"admin/config/providers/remove",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"receiver.config.consumers.add":{path:"admin/config/consumers/add",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"receiver.config.consumers.update":{path:"admin/config/consumers/update",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"receiver.config.consumers.remove":{path:"admin/config/consumers/remove",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"receiver.config.rules.add":{path:"admin/config/rules/add",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"receiver.config.rules.update":{path:"admin/config/rules/update",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"receiver.config.rules.remove":{path:"admin/config/rules/remove",type:"POST",needSendAccessToken:!0,convertQuery:v,convertResult:g},"receiver.messages.get":{path:"admin/messages/get",type:"GET",needSendAccessToken:!0,convertQuery:v,convertResult:g},"receiver.config.get":{path:"admin/config",type:"GET",needSendAccessToken:!0,convertQuery:v,convertResult:g}},y=function(){function e(t,n){Object(l.a)(this,e),this.methodsMap=void 0,this.accessToken=void 0,this.needRemember=void 0,this.apiUrl=void 0,this.methodsMap=n,this.apiUrl=t,this.loadTokens()}return Object(d.a)(e,[{key:"login",value:function(){var e=Object(O.a)(f.a.mark((function e(t,n,c){var r=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callMethod("admin.auth.login",{login:t,password:n}).then((function(e){return r.updateTokens(e.data.token,c),e})));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,c){return e.apply(this,arguments)}}()},{key:"logout",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.callMethod("admin.auth.logout",{}).then((function(e){return t.removeTokens(),t.accessToken=null,window.location.reload(),e})));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"checkAuth",value:function(){var e=Object(O.a)(f.a.mark((function e(){var t=this;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.fastCheckAuth()){e.next=2;break}return e.abrupt("return",!1);case 2:return e.abrupt("return",this.callMethod("admin.auth.check",{}).then((function(){return!0}),(function(){return t.removeTokens(),window.location.reload(),!1})));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fastCheckAuth",value:function(){return null!==this.accessToken&&void 0!==this.accessToken}},{key:"callMethod",value:function(){var e=Object(O.a)(f.a.mark((function e(t,n){var c,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return!(r.length>2&&void 0!==r[2])||r[2],c=this.methodsMap[t],e.abrupt("return",this.fetchMethod(c,n).then((function(e){if(2===(e.status/100|0)){var t=c.convertResult(e.result);return new k(e.status,t)}throw new S(e.status,e.result,c)})));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"fetchMethod",value:function(e,t){var n=this,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return this.fetch(e,t).then(function(){var e=Object(O.a)(f.a.mark((function e(t){var n,c;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.json();case 3:n=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n={};case 9:return c=t.status,e.abrupt("return",{status:c,result:n});case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),(function(r){if(c>1)return new Promise((function(e,t){return setTimeout((function(){return e(null)}),1e3)})).then((function(){return n.fetchMethod(e,t,c-1)}));throw new S(0,{error:r},e)}))}},{key:"fetch",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){for(var n=e.convertQuery(t),c=Object.keys(n),r=e.path.split(":").map((function(e,t){if(t%2===1){var r=c.indexOf(e);if(r>-1)return c.splice(r,1),n[e]}return e})).join(""),s={},i=0,a=c;i<a.length;i++){var o=a[i];s[o]=n[o]}var l="GET"===e.type?this.createUrlParams(s):"",d=e.url?e.url:this.apiUrl,u="".concat(d).concat(r).concat(l),j={headers:this.createFetchHeaders(e,s),method:e.type,redirect:"follow"};return"GET"!==e.type&&(j.body=s.formdata?s.formdata:JSON.stringify(s)),fetch(u,j)}))},{key:"setAccessToken",value:function(e){this.updateTokens(e,this.needRemember)}},{key:"updateTokens",value:function(e,t){this.accessToken=e,this.needRemember=t,localStorage.setItem("storage",t?"local":"session"),this.getUserStorage().setItem("accessToken",e)}},{key:"loadTokens",value:function(){var e=localStorage.getItem("storage");null!==e&&(this.needRemember="local"===e,this.accessToken=this.getUserStorage().getItem("accessToken"))}},{key:"removeTokens",value:function(){localStorage.removeItem("storage"),localStorage.removeItem("accessToken"),sessionStorage.removeItem("accessToken")}},{key:"getUserStorage",value:function(){return this.needRemember?localStorage:sessionStorage}},{key:"createUrlParams",value:function(e){return 0===Object.keys(e).length?"":"?".concat(Object.keys(e).map((function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))})).join("&"))}},{key:"createFetchHeaders",value:function(e,t){var n=new Headers;return t.formdata||n.append("Content-Type","application/json"),e.needSendAccessToken&&n.append("Authorization","".concat(this.accessToken)),n}}]),e}(),k=function e(t,n){Object(l.a)(this,e),this.status=void 0,this.type=void 0,this.data=void 0,this.status=t,this.type=t/100|0,this.data=n},S=function(e){Object(h.a)(n,e);var t=Object(b.a)(n);function n(e,c,r){var s;return Object(l.a)(this,n),(s=t.call(this,"\u041e\u0448\u0438\u0431\u043a\u0430 \u0432\u044b\u0437\u043e\u0432\u0430 \u043c\u0435\u0442\u043e\u0434\u0430")).method=void 0,s.status=void 0,s.type=void 0,s.data=void 0,s.status=e,s.method=r,s.type=e/100|0,s.data=c,console.error(Object(j.a)(s)),s}return n}(Object(p.a)(Error));console.log("localhost"===window.location.hostname?"http://ton-callback.arsenicum12.ru:8001/":"/");var N=new y("localhost"===window.location.hostname?"http://ton-callback.arsenicum12.ru:8001/":"/",x),w=function(){function e(){Object(l.a)(this,e),this.consumers={},this.providers={},this.loading=!1,Object(u.m)(this,{providers:u.n.deep,consumers:u.n.deep,loading:u.n,update:u.f})}return Object(d.a)(e,[{key:"update",value:function(){var e=this;this.loading=!0,N.callMethod("receiver.config.get",{}).then((function(t){Object(u.o)((function(){e.providers=t.data.providers,e.consumers=t.data.consumers,e.loading=!1}))}))}}]),e}(),C=n(4),T=n(0),R={en:[0,{auth:{login:"Login",password:"Password",auth:"Login",incorrect:"Incorrect login or password"},sidebar:{statistics:"Statistics",providers:"Providers",consumers:"Consumers",messages:"Messages",settings:"Settings"}}],ru:[1,{auth:{login:"\u041b\u043e\u0433\u0438\u043d",password:"\u041f\u0430\u0440\u043e\u043b\u044c",auth:"\u0412\u043e\u0439\u0442\u0438",incorrect:"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"},sidebar:{statistics:"\u0421\u0442\u0430\u0442\u0438\u0441\u0442\u043a\u0430",providers:"\u041f\u0440\u043e\u0432\u0430\u0439\u0434\u0435\u0440\u044b",consumers:"\u041f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u0438",messages:"\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f",settings:"\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438"}}]},P=s.a.createContext({lang:R.en[1],index:R.en[0],set:function(){}}),A=function(e){var t=Object(r.useState)("en"),n=Object(C.a)(t,2),c=n[0],s=n[1];return Object(T.jsx)(P.Provider,{value:{lang:R[c][1],index:R[c][0],set:s},children:e.children})};function M(){var e=Object(r.useContext)(P);return[e.lang,e.index,e.set]}var I=n(13),_=n(5),E=(n(43),function(e){return Object(T.jsx)("div",{className:"loading-animation-wrapper",style:{display:e.hidden?"none":"block"},children:Object(T.jsx)("progress",{className:"progress-round"})})}),F=(n(44),s.a.forwardRef((function(e,t){var n=e.type,r=e.placeholder,s=e.onClick,i=e.onChange,a=e.value,o=e.valid,l=e.autoComplete,d=e.name,u=e.id,j=e.defaultValue,h=Object.assign({type:n,placeholder:r,onClick:s,onChange:i,value:a,valid:!1!==o?"true":"false",autoComplete:l,name:d,id:u,defaultValue:j},e.otherProps);return Object(T.jsxs)("div",{className:"input-v2-row ".concat(e.className||""),children:[Object(T.jsx)("input",Object(c.a)({className:"input-v2",ref:t},h)),(e.children||e.loading)&&Object(T.jsx)("div",{className:"input-v2-side-block",children:e.loading?Object(T.jsx)(E,{}):e.children}),!1===e.valid&&e.errorLabel&&Object(T.jsx)("p",{className:"input-v2-error-label",children:e.errorLabel})]})}))),Q=(n(45),function(e){return e.link?Object(T.jsxs)(I.b,{to:e.link,className:"button button-type-".concat(e.type),onClick:e.onClick,children:[e.text,e.loading&&Object(T.jsx)(E,{hidden:!1})]}):Object(T.jsxs)("div",{className:"button ".concat(e.loading?"button-loading":""," button-type-").concat(e.type),onClick:e.onClick,children:[e.text,e.loading&&Object(T.jsx)(E,{hidden:!1})]})}),z=(n(53),function(){var e=M(),t=Object(C.a)(e,3),n=t[0],c=(t[1],t[2],Object(r.useRef)(null)),s=Object(r.useRef)(null);return Object(T.jsxs)("div",{className:"page-auth",children:[N.fastCheckAuth()&&Object(T.jsx)(_.a,{to:"/admin"}),Object(T.jsx)("div",{className:"auth-form-wrapper",children:Object(T.jsxs)("form",{className:"auth-form",children:[Object(T.jsx)("h2",{children:"TON NOTIFICATION RECEIVER"}),Object(T.jsx)(F,{ref:c,className:"large-height montserrat-font",placeholder:n.auth.login}),Object(T.jsx)(F,{ref:s,className:"large-height montserrat-font",type:"password",placeholder:n.auth.password}),Object(T.jsx)(Q,{onClick:function(){var e=c.current.value,t=s.current.value;N.login(e,t,!1).then((function(e){window.location.reload()})).catch((function(e){alert()}))},type:"primary",text:n.auth.auth})]})})]})}),H=(n(54),function(e){return Object(T.jsxs)(s.a.Fragment,{children:[Object(T.jsx)("div",{className:"page-user-sidebar-parent sidebar-".concat(e.isClose?"close":"open"),onClick:function(){return e.onClose()}}),Object(T.jsxs)("div",{className:"page-user-sidebar sidebar-".concat(e.isClose?"close":"open"),children:[Object(T.jsx)("div",{className:"page-user-sidebar-logo",children:Object(T.jsx)("h2",{children:"TON NOTICES RECEIVER"})}),e.children]}),Object(T.jsx)("div",{className:"page-user-sidebar sidebar-fake"})]})}),U=(n(55),function(e){var t=e.onClick,n=Object.assign({onClick:t},e.otherProps);return Object(T.jsx)("div",Object(c.a)(Object(c.a)({},n),{},{className:"".concat(e.isHidden?"icon icon-hidden":"icon"," ").concat(e.type),style:{backgroundColor:e.iconColor,WebkitMaskImage:"url(".concat(e.url,")"),WebkitMaskSize:e.iconSize,WebkitMaskPosition:e.iconPosition},children:e.children}))}),L=(n(56),function(e){var t=Object(_.g)(e.url||""),n=t&&e.url,c=t&&e.url?"button-sidebar-active":"button-sidebar-inactive";return Object(T.jsxs)("div",{className:"button-sidebar ".concat(c),children:[e.url?Object(T.jsxs)(I.b,{draggable:"false",to:e.url,className:"button-sidebar-body",onClick:e.onClick,children:[Object(T.jsx)(U,{iconColor:n?"var(--main-primary-color)":"white",url:e.icon||""}),Object(T.jsx)("p",{children:e.text})]}):Object(T.jsxs)("div",{className:"button-sidebar-body",onClick:e.onClick,children:[Object(T.jsx)(U,{iconColor:n?"var(--main-primary-color)":"white",url:e.icon||""}),Object(T.jsx)("p",{children:e.text})]}),Object(T.jsx)(V,{buttons:e.subbuttons?e.subbuttons:[]})]})}),V=function(e){return Object(T.jsx)("div",{className:"button-sidebar-subbuttons",children:e.buttons.map((function(e,t){return Object(T.jsx)(L,Object(c.a)({},e),t)}))})},D=(n(57),function(e){return Object(T.jsxs)(s.a.Fragment,{children:[Object(T.jsx)("div",{className:"page-user-header-fake"}),Object(T.jsxs)("div",{className:"page-user-header",children:[Object(T.jsx)(U,{iconSize:"45%",url:"/icons/menu.svg",onClick:e.onOpenSidebar,type:"header-show-sidebar"}),e.children]})]})}),B=(n(58),function(e){var t=Object(r.useState)(e.hidden?"hidden":"showed"),n=Object(C.a)(t,2),c=n[0],s=n[1],i=Object(r.useRef)(null),a=e.hidden?"hidden":"showed";return a!==c&&null!==i&&null!==i.current&&null!==i.current.firstChild&&(s(a),!0===e.hidden?(i.current.style.height=i.current.firstChild.offsetHeight+"px",setTimeout((function(){null!==i&&null!==i.current&&(i.current.style.height="0px")}),0)):(i.current.style.height=i.current.firstChild.offsetHeight+"px",setTimeout((function(){null!==i&&null!==i.current&&(i.current.style.height="")}),250))),Object(T.jsxs)("div",{className:"container-dropdown",children:[Object(T.jsx)("div",{className:"container-dropdown-header",onClick:e.onHeaderClick,children:e.header}),Object(T.jsx)("div",{ref:i,className:"container-dropdown-body dropdown-container-".concat(c),children:Object(T.jsx)("div",{children:e.children})})]})}),G=n(34),J=n.n(G),W=(n(66),function(e){var t=Object(r.useRef)(null);return Object(T.jsxs)("div",{ref:t,className:"qr-code-container ".concat(e.downloadable?"downloadable":""),style:{width:e.size+"px",height:e.size+"px"},children:[Object(T.jsx)(J.a,{value:e.value,size:10*e.size}),Object(T.jsx)(U,{iconColor:"var(--color-1e-gray)",iconSize:"45%",url:"/icons/download.svg",onClick:function(){if(null!==t.current){var e=t.current.getElementsByTagName("svg");if(0!==e.length){var n=e[0].outerHTML,c=URL.createObjectURL(new Blob([n],{type:"image/svg+xml"})),r=document.createElement("img");r.style.position="absolute",r.style.top="-9999px",document.body.appendChild(r),r.onload=function(){var e=document.createElement("canvas");e.width=512,e.height=512;var t=e.getContext("2d");if(null!==t){t.drawImage(r,0,0,r.clientWidth,r.clientHeight,0,0,512,512);var n=e.toDataURL("image/png"),c=document.createElement("a");c.download="qr-code.png",c.href=n,c.click()}document.body.removeChild(r)},r.src=c,console.log("startDownload"),console.log(t,c)}}}})]})}),q=(n(67),Object(o.b)("configStore")(Object(o.c)((function(e){var t=e.configStore,n=e.providerId,c=e.providerSettings,s=Object(r.useState)(!0),i=Object(C.a)(s,2),a=i[0],o=i[1],l=Object(T.jsxs)("div",{className:"provider-info-header",children:[Object(T.jsx)("p",{children:"".concat(c.name," (ID=").concat(n,")")}),Object(T.jsxs)("div",{className:"provider-info-header-icons",children:[Object(T.jsx)(U,{iconSize:"55%",url:"/icons/remove.svg",onClick:function(e){N.callMethod("receiver.config.providers.remove",{provider_id:n}).then((function(){return Object(u.o)((function(){return delete t.providers[n]}))})),e.stopPropagation()}}),Object(T.jsx)(U,{iconSize:"55%",url:"/icons/down-arrow.svg",type:a?"icon-r0":"icon-r180"})]})]});return Object(T.jsx)("div",{className:"provider-info-dropdown",children:Object(T.jsx)(B,{onHeaderClick:function(){return o(!a)},hidden:a,header:l,children:Object(T.jsx)("div",{className:"provider-info",children:Object(T.jsxs)("div",{className:"provider-info-info",children:[Object(T.jsx)("img",{alt:"",src:"".concat(c.url).concat(c.icon)}),Object(T.jsxs)("div",{className:"provider-info-block",children:[Object(T.jsx)("p",{className:"desc",children:c.description}),Object(T.jsx)("p",{children:"url: ".concat(c.url)}),Object(T.jsx)("p",{children:"version: ".concat(c.version)}),Object(T.jsx)("p",{children:"id: ".concat(n)}),Object(T.jsxs)("div",{className:"addr",children:[Object(T.jsx)("p",{children:"address: ".concat(c.address)}),Object(T.jsx)("p",{children:"public key: ".concat(c.public_key)})]})]}),Object(T.jsxs)("div",{className:"provider-info-qrcode",children:[Object(T.jsx)(W,{size:110,value:"https://uri.ton.surf/chat/".concat(c.address)}),Object(T.jsx)("p",{children:"Support"})]})]})})})})})))),K=Object(o.b)("configStore")(Object(o.c)((function(e){var t=e.configStore,n=Object(r.useRef)(null),i=Object(r.useState)(!1),a=Object(C.a)(i,2),o=a[0],l=a[1];return Object(T.jsxs)(s.a.Fragment,{children:[Object(T.jsx)(D,{onOpenSidebar:e.onOpenSidebar}),Object(T.jsx)("div",{className:"page-admin-page",children:Object(T.jsxs)("div",{className:"page-admin-provider-list",children:[Object.keys(t.providers).map((function(e,n){return Object(T.jsx)(q,{providerId:e,providerSettings:t.providers[e]},n)})),Object(T.jsx)("div",{className:"provider-create-form",children:Object(T.jsx)("div",{className:"provider-settings provider-info-info",children:Object(T.jsxs)("div",{className:"provider-settings-row",children:[Object(T.jsx)("p",{children:"Provider URL:"}),Object(T.jsxs)("div",{className:"provider-setting-input-row",children:[Object(T.jsx)(F,{ref:n,placeholder:"Provider url",className:"small-height"}),Object(T.jsx)(Q,{onClick:function(){if(!o){var e=n.current.value,r="/"===e[e.length-1]?e.slice(0,-1):e;l(!0),fetch("".concat(r,"/api/info")).then((function(e){return e.json()})).then((function(e){if(!(e.id in t.providers))return N.callMethod("receiver.config.providers.add",{provider:Object(c.a)(Object(c.a)({},e),{},{url:r})}).then((function(){Object(u.o)((function(){return t.providers[e.id]=Object(c.a)(Object(c.a)({},e),{},{url:r})}))}))})).finally((function(){return l(!1)}))}},loading:o,text:"Add",type:"primary small-height"})]})]})})})]})})]})}))),X=(n(68),Object(o.b)("configStore")(Object(o.c)((function(e){var t=e.configStore,n=e.provider_id,c=e.hash,i=e.rule,a=Object(r.useState)(!1),o=Object(C.a)(a,2),l=o[0],d=o[1],j=Object(r.useState)(!1),h=Object(C.a)(j,2),b=h[0],p=h[1],m=Object(r.useRef)(null),f=Object(r.useRef)(null);return Object(T.jsxs)(s.a.Fragment,{children:[Object(T.jsx)("p",{className:"setting-subheader",children:Object(T.jsxs)("b",{children:[n,":"]})}),Object(T.jsx)("div",{className:"admin-setting-input-row-multiline hash provider-rule-block",children:Object(T.jsxs)("form",{autoComplete:"off",className:"consumer-provider-rule",children:[Object(T.jsx)("p",{children:"Secret:"}),Object(T.jsx)(F,{ref:f,defaultValue:i.secret,type:"text",className:"small-height"}),Object(T.jsx)("p",{children:"Forward url:"}),Object(T.jsx)(F,{ref:m,defaultValue:i.forward,type:"text",className:"small-height"}),Object(T.jsxs)("div",{className:"rules-button",children:[Object(T.jsx)(Q,{loading:l,onClick:function(){var e=m.current.value,r=f.current.value;d(!0),N.callMethod("receiver.config.rules.update",{rule:{hash:c,provider_id:n,secret:r,forward:e}}).then((function(){Object(u.o)((function(){return t.consumers[c].rules[n]={secret:r,forward:e}}))})).finally((function(){return d(!1)}))},text:"Save",type:"primary small-height"}),Object(T.jsx)(Q,{loading:b,onClick:function(){p(!0),N.callMethod("receiver.config.rules.remove",{rule:{hash:c,provider_id:n}}).then((function(){Object(u.o)((function(){return delete t.consumers[c].rules[n]}))})).finally((function(){return p(!1)}))},text:"Remove",type:"secondary small-height"})]})]})})]})})))),Y=Object(o.b)("configStore")(Object(o.c)((function(e){var t=e.configStore,n=e.hash,c=e.consumerSettings,s=Object(r.useRef)(null),i=Object(r.useRef)(null),a=Object(r.useRef)(null),o=Object(r.useState)(!1),l=Object(C.a)(o,2),d=l[0],j=l[1],h=Object(r.useState)(!1),b=Object(C.a)(h,2),p=b[0],m=b[1],f=Object(T.jsxs)("div",{className:"provider-info-header",children:[Object(T.jsx)("p",{children:"".concat(n.slice(0,12),".......").concat(n.slice(-12))}),Object(T.jsxs)("div",{className:"provider-info-header-icons",children:[Object(T.jsx)(U,{iconSize:"55%",url:"/icons/remove.svg",onClick:function(e){N.callMethod("receiver.config.consumers.remove",{hash:n}).then((function(){return Object(u.o)((function(){return delete t.consumers[n]}))})),e.stopPropagation()}}),Object(T.jsx)(U,{iconSize:"55%",url:"/icons/down-arrow.svg",type:p?"icon-r0":"icon-r180"})]})]});return Object(T.jsx)("div",{className:"provider-info-dropdown",children:Object(T.jsxs)(B,{onHeaderClick:function(){return m(!p)},hidden:p,header:f,children:[Object(T.jsx)("div",{className:"consumer-info",children:Object(T.jsx)("div",{className:"admin-settings-row consumer-data",children:Object(T.jsxs)("p",{children:[Object(T.jsx)("b",{children:"Hash: "}),n]})})}),Object(T.jsx)("div",{className:"consumer-info",children:Object(T.jsxs)("div",{className:"admin-settings-row",children:[Object(T.jsx)("p",{className:"setting-header",children:Object(T.jsx)("b",{children:"Consumer settings:"})}),Object(T.jsx)("div",{className:"admin-setting-input-row-multiline hash",children:Object(T.jsxs)("form",{autoComplete:"off",className:"consumer-provider-rule",children:[Object(T.jsx)("p",{children:"Encryption public key:"}),Object(T.jsx)(F,{ref:s,type:"text",defaultValue:c.public_key,className:"small-height"}),Object(T.jsx)("p",{children:"Decryption secret key:"}),Object(T.jsx)(F,{ref:i,type:"text",defaultValue:c.secret_key,className:"small-height"}),Object(T.jsx)(Q,{onClick:function(e){var r=s.current.value,a=i.current.value;j(!0),N.callMethod("receiver.config.consumers.update",{consumer:{hash:n,public_key:r,secret_key:a}}).then((function(){Object(u.o)((function(){return t.consumers[n]={rules:c.rules,hash:n,public_key:r,secret_key:a}}))})).finally((function(){return j(!1)}))},loading:d,text:"Save",type:"primary small-height"})]})})]})}),Object(T.jsx)("div",{className:"consumer-info",children:Object(T.jsxs)("div",{className:"admin-settings-row",children:[Object(T.jsx)("p",{className:"setting-header",children:Object(T.jsx)("b",{children:"Rules:"})}),Object(T.jsx)("div",{className:"consumer-info-rules-list",children:Object.keys(c.rules).map((function(e,t){return Object(T.jsx)(X,{rule:c.rules[e],hash:n,provider_id:e},t)}))})]})}),Object(T.jsx)("div",{className:"consumer-info",children:Object(T.jsxs)("div",{className:"admin-settings-row",children:[Object(T.jsx)("p",{children:"Add provider rule:"}),Object(T.jsx)("div",{className:"admin-setting-input-row-multiline hash",children:Object(T.jsxs)("form",{autoComplete:"off",className:"add-provider-to-consumer",children:[Object(T.jsx)("select",{ref:a,children:Object.keys(t.providers).map((function(e,t){return Object(T.jsx)("option",{value:e,children:e},t)}))}),Object(T.jsx)(Q,{onClick:function(){var e=a.current.value;N.callMethod("receiver.config.rules.add",{rule:{hash:n,provider_id:e,secret:"",forward:"localhost:8924"}}).then((function(){return Object(u.o)((function(){return t.consumers[n].rules[e]={secret:"",forward:"localhost:8924"}}))}))},loading:d,text:"Add",type:"primary small-height"})]})})]})})]})})}))),Z=Object(o.b)("configStore")(Object(o.c)((function(e){var t=e.configStore,n=Object(r.useRef)(null),c=Object(r.useRef)(null),i=Object(r.useRef)(null),a=Object(r.useState)(!1),o=Object(C.a)(a,2),l=o[0],d=o[1];return Object(T.jsxs)(s.a.Fragment,{children:[Object(T.jsx)(D,{onOpenSidebar:e.onOpenSidebar}),Object(T.jsx)("div",{className:"page-admin-page",children:Object(T.jsxs)("div",{className:"page-admin-provider-list",children:[Object.keys(t.consumers).map((function(e,n){return Object(T.jsx)(Y,{hash:e,consumerSettings:t.consumers[e]},n)})),Object(T.jsx)("div",{className:"consumer-create-form",children:Object(T.jsxs)("div",{className:"admin-settings-row",children:[Object(T.jsx)("p",{children:"Add Consumer:"}),Object(T.jsx)("div",{className:"admin-setting-input-row-multiline hash",children:Object(T.jsxs)("form",{autoComplete:"off",children:[Object(T.jsx)(F,{ref:n,placeholder:"Hash",type:"text",className:"small-height"}),Object(T.jsx)(F,{ref:c,placeholder:"Public encryption key",type:"text",className:"small-height"}),Object(T.jsx)(F,{ref:i,placeholder:"Secret decryption key",type:"text",className:"small-height"}),Object(T.jsx)(Q,{onClick:function(){if(!l){var e=n.current.value,r=c.current.value,s=i.current.value;d(!0),N.callMethod("receiver.config.consumers.add",{consumer:{hash:e,public_key:r,secret_key:s}}).then((function(){Object(u.o)((function(){return t.consumers[e]={rules:{},hash:e,public_key:r,secret_key:s}}))})).finally((function(){return d(!1)}))}},loading:l,text:"Add",type:"primary small-height"})]})})]})})]})})]})}))),$=(n(69),function(e){var t=Object(r.useState)(!1),n=Object(C.a)(t,2),c=n[0],s=n[1],i=Object(r.useRef)(null),a=Object(r.useRef)(null),o=Object(r.useRef)(null);return Object(T.jsxs)("div",{className:"admin-settings-row",children:[Object(T.jsx)("p",{children:"Change login and password:"}),Object(T.jsx)("div",{className:"admin-setting-input-row-multiline",children:Object(T.jsxs)("form",{autoComplete:"off",children:[Object(T.jsx)(F,{ref:i,placeholder:"New login",className:"small-height"}),Object(T.jsx)(F,{ref:a,placeholder:"New password",type:"password",className:"small-height"}),Object(T.jsx)(F,{ref:o,placeholder:"Old password",type:"password",className:"small-height"}),Object(T.jsx)(Q,{loading:c,onClick:function(){if(!c){var e=i.current.value,t=a.current.value,n=o.current.value;s(!0),N.callMethod("admin.auth.change",{new_login:e,new_password:t,old_password:n}).then((function(e){N.setAccessToken(e.data.token),alert("success")})).catch((function(){alert("401")})).finally((function(){return s(!1)}))}},text:"Change",type:"primary small-height"})]})})]})}),ee=Object(o.b)("configStore")(Object(o.c)((function(e){return Object(T.jsxs)(s.a.Fragment,{children:[Object(T.jsx)(D,{onOpenSidebar:e.onOpenSidebar}),Object(T.jsx)("div",{className:"page-admin-page",children:Object(T.jsx)("div",{className:"page-admin-block",children:Object(T.jsx)($,{})})})]})}))),te=(n(70),Object(o.b)("configStore")(Object(o.c)((function(e){var t=Object(r.useState)([]),n=Object(C.a)(t,2),c=n[0],i=n[1];return Object(r.useEffect)((function(){N.callMethod("receiver.messages.get",{}).then((function(e){i(e.data)}))}),[]),Object(T.jsxs)(s.a.Fragment,{children:[Object(T.jsx)(D,{onOpenSidebar:e.onOpenSidebar}),Object(T.jsx)("div",{className:"page-admin-page",children:Object(T.jsx)("div",{className:"page-admin-provider-list",children:c.map((function(e,t){return Object(T.jsxs)("div",{className:"message-block",children:[Object(T.jsxs)("p",{children:[Object(T.jsx)("b",{children:"Date: "}),new Date(1e3*e.date).toString()]}),Object(T.jsxs)("p",{children:[Object(T.jsx)("b",{children:"Consumer: "}),e.user]}),Object(T.jsxs)("p",{children:[Object(T.jsx)("b",{children:"Provider: "}),e.provider]}),Object(T.jsx)("hr",{}),Object(T.jsxs)("p",{children:[Object(T.jsx)("b",{children:"From: "}),e.notification.src]}),Object(T.jsxs)("p",{children:[Object(T.jsx)("b",{children:"To: "}),e.notification.dst]}),Object(T.jsxs)("p",{children:[Object(T.jsx)("b",{children:"Value: "}),e.notification.value_dec]}),Object(T.jsx)("hr",{}),Object(T.jsx)("p",{className:"message-json",children:JSON.stringify(e,null,"\t")})]},t)}))})})]})})))),ne=(n(71),Object(o.b)("configStore")(Object(o.c)((function(e){var t=e.configStore,n=M(),c=Object(C.a)(n,3),s=c[0],i=(c[1],c[2],Object(r.useState)(!0)),a=Object(C.a)(i,2),o=a[0],l=a[1];return Object(r.useEffect)((function(){N.checkAuth().then((function(e){e&&t.update()}))}),[]),Object(T.jsxs)("div",{className:"page-admin",children:[Object(T.jsx)(H,{onClose:function(){return l(!0)},isClose:o,children:Object(T.jsx)("div",{className:"page-admin-sidebar-buttons",children:Object(T.jsx)(V,{buttons:[{text:s.sidebar.providers,icon:"/icons/sidebar/services.svg",url:"/admin/providers",onClick:function(){return l(!0)}},{text:s.sidebar.consumers,icon:"/icons/sidebar/services.svg",url:"/admin/consumers",onClick:function(){return l(!0)}},{text:s.sidebar.messages,icon:"/icons/sidebar/messages.svg",url:"/admin/messages",onClick:function(){return l(!0)}},{text:s.sidebar.settings,icon:"/icons/sidebar/settings.svg",url:"/admin/settings",onClick:function(){return l(!0)}}]})})}),Object(T.jsx)("div",{className:"page-admin-body",children:Object(T.jsxs)(_.d,{children:[!N.fastCheckAuth()&&Object(T.jsx)(_.a,{to:"/auth"}),Object(T.jsx)(_.b,{path:"/admin/statistics",render:function(){return Object(T.jsx)(K,{onOpenSidebar:function(){return l(!1)}})}}),Object(T.jsx)(_.b,{path:"/admin/providers",render:function(){return Object(T.jsx)(K,{onOpenSidebar:function(){return l(!1)}})}}),Object(T.jsx)(_.b,{path:"/admin/consumers",render:function(){return Object(T.jsx)(Z,{onOpenSidebar:function(){return l(!1)}})}}),Object(T.jsx)(_.b,{path:"/admin/messages",render:function(){return Object(T.jsx)(te,{onOpenSidebar:function(){return l(!1)}})}}),Object(T.jsx)(_.b,{path:"/admin/settings",render:function(){return Object(T.jsx)(ee,{onOpenSidebar:function(){return l(!1)}})}}),Object(T.jsx)(_.a,{from:"/admin",to:"/admin/providers"})]})})]})})))),ce=function(){return Object(T.jsx)(s.a.Fragment,{children:Object(T.jsx)(I.a,{children:Object(T.jsxs)(_.d,{children:[Object(T.jsx)(_.b,{path:"/auth",component:z}),Object(T.jsx)(_.b,{path:"/admin",component:ne}),Object(T.jsx)(_.a,{from:"/",to:"/auth"})]})})})},re=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,74)).then((function(t){var n=t.getCLS,c=t.getFID,r=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),r(e),s(e),i(e)}))},se=(n(72),{configStore:new w});a.a.render(Object(T.jsx)(s.a.StrictMode,{children:Object(T.jsx)(o.a,Object(c.a)(Object(c.a)({},se),{},{children:Object(T.jsx)(A,{children:Object(T.jsx)(ce,{})})}))}),document.getElementById("root")),re()}},[[73,1,2]]]);
//# sourceMappingURL=main.82d4c728.chunk.js.map